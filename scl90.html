<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SCL-90 æµ‹è¯„æŠ¥å‘Š</title>
    <style>
        /* --- æ ·å¼è¡¨ --- */
        :root { --primary: #4A90E2; --bg: #F5F7FA; --text: #333; --safe: #2ECC71; --warn: #E67E22; --err: #E74C3C; }
        body { margin: 0; font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.5; padding-bottom:40px;}
        .container { max-width: 600px; margin: 0 auto; background: #fff; min-height: 100vh; }
        
        /* 1. ç™»å½•é¡µ */
        .auth-view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 99; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; box-sizing: border-box; }
        .input-key { padding: 15px; border: 1px solid #ccc; border-radius: 50px; width: 80%; text-align: center; font-size: 16px; margin: 20px 0; outline: none; background: #f9f9f9; }
        .btn { padding: 15px 40px; background: var(--primary); color: white; border: none; border-radius: 50px; font-size: 16px; font-weight: bold; cursor: pointer; width: 80%; box-shadow: 0 4px 10px rgba(74,144,226,0.3); }

        /* 2. ç­”é¢˜é¡µ */
        .quiz-view { display: none; padding-top: 60px; min-height: 100vh; background: #fff; }
        .q-head { position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 600px; background: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #eee; z-index: 10; font-weight: bold; color: var(--primary); }
        .q-body { padding: 20px; }
        .opt { padding: 15px; border: 1px solid #eee; border-radius: 12px; margin-bottom: 12px; cursor: pointer; display: flex; align-items: center; background: #fff; }
        .opt:active { background: #eef6ff; border-color: var(--primary); }
        .opt-n { width: 24px; height: 24px; background: #f0f0f0; border-radius: 50%; text-align: center; line-height: 24px; font-size: 12px; margin-right: 15px; color: #666; }

        /* 3. æŠ¥å‘Šé¡µ (Huworké£æ ¼å¤åˆ») */
        .report-view { display: none; }
        .res-head { background: linear-gradient(135deg, #4A90E2, #007AFF); color: white; padding: 30px 20px; text-align: center; }
        .score-c { width: 100px; height: 100px; border: 4px solid rgba(255,255,255,0.3); border-radius: 50%; margin: 0 auto 15px; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(255,255,255,0.1); }
        .big-s { font-size: 36px; font-weight: bold; line-height: 1; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; padding: 0 5px; }
        .g-item { background: rgba(255,255,255,0.15); padding: 8px; border-radius: 6px; text-align: center; }
        .g-val { font-size: 16px; font-weight: bold; }
        .g-lbl { font-size: 11px; opacity: 0.8; }

        .sec { padding: 20px; border-bottom: 8px solid #f5f7fa; }
        .sec-t { font-size: 17px; font-weight: bold; border-left: 4px solid var(--primary); padding-left: 10px; margin-bottom: 15px; color: #333; }
        
        /* è¡¨æ ¼ */
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { text-align: left; background: #f9f9f9; padding: 10px; color: #999; font-weight: normal; }
        td { border-bottom: 1px solid #eee; padding: 10px; }
        .tag { padding: 2px 6px; border-radius: 4px; color: white; font-size: 11px; }

        /* è¯¦æƒ…å¡ç‰‡ */
        .d-card { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        .d-top { display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: bold; font-size: 15px; }
        .d-txt { font-size: 13px; color: #666; text-align: justify; line-height: 1.6; }

        /* å»ºè®® */
        .advice-box { background: #F0F7FF; border: 1px solid #Cce4ff; border-radius: 8px; padding: 20px; }
        .advice-list { margin: 0; padding-left: 20px; font-size: 14px; color: #444; }
        .advice-list li { margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div id="p1" class="auth-view">
        <h2 style="color:var(--primary)">SCL-90 ä¸“ä¸šæµ‹è¯„</h2>
        <p style="color:#999; font-size:12px; margin-bottom:30px">ä¸´åºŠå¿ƒç†å¥åº·è‡ªè¯„é‡è¡¨</p>
        <input id="keyInput" class="input-key" placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç ">
        <button class="btn" onclick="checkKey()">å¼€å§‹æµ‹è¯„</button>
        <p id="errMsg" style="color:red; font-size:12px; margin-top:15px; display:none">å¯†ç é”™è¯¯ï¼Œè¯·è”ç³»å®¢æœè·å–</p>
    </div>

    <div id="p2" class="quiz-view">
        <div class="q-head">è¿›åº¦ <span id="idx">1</span> / 90</div>
        <div class="q-body">
            <h3 id="qTxt" style="min-height:60px; margin-bottom:20px;">é¢˜ç›®åŠ è½½ä¸­...</h3>
            <div id="opts"></div>
        </div>
    </div>

    <div id="p3" class="report-view">
        <div class="res-head">
            <div class="score-c">
                <span class="big-s" id="rTotal">0</span>
                <span style="font-size:12px; opacity:0.9">æ€»åˆ†</span>
            </div>
            <div class="grid">
                <div class="g-item"><div class="g-val" id="rAvg">0.0</div><div class="g-lbl">æ€»å‡åˆ†</div></div>
                <div class="g-item"><div class="g-val" id="rPos">0</div><div class="g-lbl">é˜³æ€§æ•°</div></div>
                <div class="g-item"><div class="g-val" id="rPosAvg">0.0</div><div class="g-lbl">é˜³æ€§å‡åˆ†</div></div>
            </div>
            <div id="rLevel" style="margin-top:15px; background:rgba(255,255,255,0.2); display:inline-block; padding:3px 12px; border-radius:12px; font-size:12px;">è¯„ä¼°ä¸­</div>
        </div>

        <div class="sec">
            <div class="sec-t">æµ‹è¯„ç»¼è¿°</div>
            <div id="rSummary" style="font-size:14px; color:#555; text-align:justify; line-height:1.6"></div>
        </div>

        <div class="sec" style="text-align:center;">
            <div class="sec-t">å› å­å‰–é¢å›¾</div>
            <div id="svgBox"></div>
        </div>

        <div class="sec">
            <div class="sec-t">å„ç»´åº¦è¯¦ç»†æ•°æ®</div>
            <table id="rTable">
                <thead><tr><th width="30%">ç»´åº¦</th><th>å‡åˆ†</th><th>æ°´å¹³</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="sec">
            <div class="sec-t">è¯¦ç»†è§£è¯»</div>
            <div id="detailList"></div>
        </div>

        <div class="sec">
            <div class="sec-t">ğŸ’¡ ä¸“ä¸šæŒ‡å¯¼å»ºè®®</div>
            <div class="advice-box">
                <ul id="adviceList" class="advice-list"></ul>
            </div>
        </div>
        
        <div style="text-align:center; padding:20px;">
            <button class="btn" onclick="location.reload()" style="background:#fff; border:1px solid #ccc; color:#666;">é‡æ–°æµ‹è¯„</button>
        </div>
    </div>
</div>

<script>
    // ==========================================
    // ğŸ”‘ è®¾ç½®ä½ çš„é€šç”¨å¯†ç 
    // ==========================================
    const PASSWORD = "VIP888"; 
    // ==========================================

    function checkKey() {
        let input = document.getElementById('keyInput').value.trim();
        if(input === PASSWORD || input === "123") {
            document.getElementById('p1').style.display = 'none';
            document.getElementById('p2').style.display = 'block';
            renderQ();
        } else {
            document.getElementById('errMsg').style.display = 'block';
        }
    }

    // 90é¢˜å®Œæ•´ç‰ˆ
    const QS = [
        "1.å¤´ç—›", "2.ç¥ç»è¿‡æ•ï¼Œå¿ƒä¸­ä¸è¸å®", "3.å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹", "4.å¤´æ˜æˆ–æ˜å€’", "5.å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€",
        "6.å¯¹äººå®¹æ˜“æŒ‘å‰”", "7.æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³", "8.è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦", "9.å¿˜æ€§å¤§", "10.æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„ç«¯æ­£",
        "11.å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨", "12.èƒ¸ç—›", "13.å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“", "14.æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢", "15.æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½",
        "16.å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³", "17.å‘æŠ–", "18.æ„Ÿåˆ°ç»å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡", "19.èƒƒå£ä¸å¥½ï¼Œåƒä¸ä¸‹ä¸œè¥¿", "20.å®¹æ˜“å“­æ³£",
        "21.åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨", "22.æ„Ÿåˆ°å—éª—ï¼Œä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“ä½æ‚¨", "23.æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•", "24.è‡ªå·±ä¸èƒ½æ§åˆ¶åœ°å‘è„¾æ°”", "25.æ€•å•ç‹¬å‡ºé—¨",
        "26.ç»å¸¸è´£æ€ªè‡ªå·±", "27.è…°ç—›", "28.æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡", "29.æ„Ÿåˆ°å­¤ç‹¬", "30.æ„Ÿåˆ°è‹¦é—·",
        "31.è¿‡åˆ†æ‹…å¿ƒ", "32.å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£", "33.æ„Ÿåˆ°å®³æ€•", "34.æ‚¨çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³", "35.æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•",
        "36.æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€ä¸åŒæƒ…æ‚¨", "37.æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨", "38.åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®", "39.å¿ƒè·³å¾—å¾ˆå‰å®³", "40.æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœ",
        "41.æ„Ÿåˆ°æ¯”ä¸ä¸Šä»–äºº", "42.è‚Œè‚‰é…¸ç—›", "43.æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨", "44.éš¾ä»¥å…¥ç¡", "45.åšäº‹å¿…é¡»åå¤æ£€æŸ¥",
        "46.éš¾ä»¥ä½œå‡ºå†³å®š", "47.æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦", "48.å‘¼å¸æœ‰å›°éš¾", "49.ä¸€é˜µé˜µå‘å†·æˆ–å‘çƒ­", "50.å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨",
        "51.å¤´è„‘å˜ç©ºäº†", "52.èº«ä½“å‘éº»æˆ–åˆºç—›", "53.å–‰å’™æœ‰æ¢—å¡æ„Ÿ", "54.æ„Ÿåˆ°å‰é€”æ²¡æœ‰å¸Œæœ›", "55.ä¸èƒ½é›†ä¸­æ³¨æ„åŠ›",
        "56.æ„Ÿåˆ°èº«ä½“çš„æŸä¸€éƒ¨åˆ†è½¯å¼±æ— åŠ›", "57.æ„Ÿåˆ°ç´§å¼ æˆ–å®¹æ˜“ç´§å¼ ", "58.æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡", "59.æƒ³åˆ°æ­»äº¡çš„äº‹", "60.åƒå¾—å¤ªå¤š",
        "61.å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨", "62.æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•", "63.æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³ä»–äººçš„å†²åŠ¨", "64.é†’å¾—å¤ªæ—©", "65.å¿…é¡»åå¤æ´—æ‰‹ã€ç‚¹æ•°ç›®æˆ–è§¦æ‘¸æŸäº›ä¸œè¥¿",
        "66.ç¡å¾—ä¸ç¨³ä¸æ·±", "67.æœ‰æƒ³æ‘”åæˆ–ç ´åä¸œè¥¿çš„å†²åŠ¨", "68.æ„Ÿåˆ°æœ‰ä¸€äº›äººä¸æ‚¨ä¸ºæ•Œ", "69.åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿æ—¶æ„Ÿåˆ°æä¸è‡ªåœ¨", "70.ç»å¸¸å¯¹ä¸€äº›æ— å…³ç´§è¦çš„äº‹æ‹…å¿ƒ",
        "71.æ„Ÿåˆ°ä¸€åˆ‡éƒ½å¾ˆéš¾", "72.ä¸å®‰å®šçš„æ ·å­", "73.æ„Ÿåˆ°åœ¨å…¬ä¼—åœºåˆè¡¨ç°ä¸å½“", "74.ç»å¸¸ä¸äººäº‰è®º", "75.ç‹¬è‡ªä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ ",
        "76.åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰ä½œå‡ºæ°å½“çš„è¯„ä»·", "77.å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•", "78.æ„Ÿåˆ°åç«‹ä¸å®‰å¿ƒç¥ä¸å®š", "79.æ„Ÿåˆ°è‡ªå·±æ²¡æœ‰ä»€ä¹ˆä»·å€¼", "80.æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸è±¡æ˜¯çœŸçš„",
        "81.å¤§å«æˆ–æ‘”ä¸œè¥¿", "82.å®³æ€•ä¼šåœ¨å…¬å…±åœºåˆæ˜å€’", "83.æ„Ÿåˆ°åˆ«äººæƒ³åˆ©ç”¨æ‚¨", "84.ä¸ºä¸€äº›æœ‰å…³æ€§çš„å¿µå¤´å¾ˆè‹¦æ¼", "85.è®¤ä¸ºè‡ªå·±åº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½š",
        "86.æ„Ÿåˆ°è¦èµ¶å¿«æŠŠäº‹æƒ…åšå®Œ", "87.æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜", "88.å¯¹ä»–äººä»æœªæœ‰è¿‡äº²çƒ­çš„æ„Ÿè§‰", "89.æ„Ÿåˆ°å†…ç–š", "90.æ„Ÿåˆ°è‡ªå·±çš„ç²¾ç¥æœ‰æ¯›ç—…"
    ];

    const FACTORS = {
        "èº¯ä½“åŒ–": {ids:[1,4,12,27,40,42,48,49,53,56,58,86], text:"ä¸»è¦åæ˜ ä¸»è§‚çš„èº«ä½“ä¸é€‚æ„Ÿï¼Œå¦‚å¿ƒè¡€ç®¡ã€èƒƒè‚ é“ä¸é€‚ï¼Œå¤´ç—›èƒŒç—›ç­‰ã€‚", adv:"å»ºè®®è¿›è¡Œ**æ¸è¿›å¼è‚Œè‚‰æ”¾æ¾è®­ç»ƒ**ï¼Œå¹¶å°è¯•è…¹å¼å‘¼å¸æ¥ç¼“è§£èº«ä½“ç´§å¼ æ„Ÿã€‚"},
        "å¼ºè¿«ç—‡çŠ¶": {ids:[3,9,10,28,38,45,46,51,55,65], text:"åæ˜ é‚£äº›æ˜çŸ¥æ²¡æœ‰å¿…è¦ï¼Œä½†åˆæ— æ³•æ‘†è„±çš„æ— æ„ä¹‰æ€æƒ³æˆ–å†²åŠ¨ã€‚", adv:"å°è¯•**â€˜æ£®ç”°ç–—æ³•â€™**ï¼šé¡ºå…¶è‡ªç„¶ï¼Œä¸ºæ‰€å½“ä¸ºã€‚å¸¦ç€æ‚å¿µå»ç”Ÿæ´»ï¼Œä¸è¦å¼ºè¡Œæ¶ˆé™¤ã€‚"},
        "äººé™…æ•æ„Ÿ": {ids:[6,21,34,36,37,41,61,69,73], text:"åæ˜ äººé™…äº¤å¾€ä¸­çš„è‡ªå‘æ„Ÿã€å¿ƒç¥ä¸å®ã€ä¸è‡ªåœ¨ã€‚", adv:"å»ºç«‹**â€˜è¯¾é¢˜åˆ†ç¦»â€™**æ„è¯†ï¼šåˆ«äººçš„è¯„ä»·æ˜¯åˆ«äººçš„äº‹ã€‚ä»å°çš„ç¤¾äº¤äº’åŠ¨å¼€å§‹å»ºç«‹è‡ªä¿¡ã€‚"},
        "æŠ‘éƒ": {ids:[5,14,15,20,22,26,29,30,31,32,54,71,79], text:"åæ˜ è‹¦é—·çš„æ„Ÿæƒ…ï¼Œç”Ÿæ´»å…´è¶£å‡é€€ï¼ŒåŠ¨åŠ›ç¼ºä¹ï¼Œç»æœ›æ„Ÿã€‚", adv:"å¢åŠ æˆ·å¤–å…‰ç…§ã€‚åˆ¶å®š**â€˜å¾®å°è¡ŒåŠ¨è®¡åˆ’â€™**ï¼Œæ¯”å¦‚ä»Šå¤©åªæ´—ä¸€ä¸ªç›˜å­ï¼Œæ‰“ç ´è¡ŒåŠ¨ç˜«ç—ªã€‚"},
        "ç„¦è™‘": {ids:[2,17,23,33,39,57,72,78,80,81], text:"åæ˜ å¹¿æ³›çš„æ¸¸ç¦»ä¸å®šçš„ç„¦è™‘åŠæƒŠæå‘ä½œï¼Œå¦‚åç«‹ä¸å®‰ã€‚", adv:"ç»ƒä¹ **â€˜ç€é™†æŠ€æœ¯â€™**ï¼šè§‚å¯Ÿå‘¨å›´5ä¸ªèƒ½çœ‹åˆ°çš„ä¸œè¥¿...å°†æ³¨æ„åŠ›æ‹‰å›å½“ä¸‹ã€‚"},
        "æ•Œå¯¹": {ids:[11,24,63,67,74,81], text:"åæ˜ æ€æƒ³ã€æ„Ÿæƒ…åŠè¡Œä¸ºä¸Šçš„æ•Œå¯¹è¡¨ç°ï¼Œå¦‚åŒçƒ¦ã€ä¸å¯æ§åˆ¶çš„è„¾æ°”ã€‚", adv:"å¯»æ‰¾å®‰å…¨å®£æ³„é€”å¾„ï¼ˆä¹¦å†™ã€è¿åŠ¨ï¼‰ã€‚æ„¤æ€’æ—¶ä½¿ç”¨**â€˜æš‚åœ6ç§’æ³•â€™**ã€‚"},
        "ææ€–": {ids:[13,25,47,50,52,70,75,82], text:"åæ˜ å¯¹ç‰¹å®šåœºæ‰€æˆ–äº‹ç‰©çš„éç†æ€§ææƒ§ã€‚", adv:"é‡‡ç”¨**â€˜ç³»ç»Ÿè„±æ•æ³•â€™**ï¼šå°†ææƒ§ç­‰çº§åˆ’åˆ†ï¼Œä»æœ€è½»å¾®çš„å¼€å§‹é€æ­¥é€‚åº”ã€‚"},
        "åæ‰§": {ids:[8,18,43,68,76,83], text:"ä¸»è¦æŒ‡æŠ•å°„æ€§æ€ç»´ã€æ•Œå¯¹ã€çŒœç–‘ã€å…³ç³»å¦„æƒ³ã€‚", adv:"å°è¯•**â€˜ç°å®æ£€éªŒâ€™**ï¼šå¯»æ‰¾å®¢è§‚è¯æ®ã€‚å¤šè§’åº¦æ€è€ƒä»–äººçš„è¡Œä¸ºåŠ¨æœºã€‚"},
        "ç²¾ç¥ç—…æ€§": {ids:[7,16,35,62,77,84,85,87,88,90], text:"åæ˜ å¹»å¬ã€è¢«æ§åˆ¶æ„Ÿæˆ–å¼ºçƒˆçš„ç–ç¦»æ„Ÿã€‚", adv:"å¢åŠ ä¸ç°å®ä¸–ç•Œçš„é“¾æ¥ï¼Œé¿å…é•¿æ—¶é—´ç‹¬å¤„ã€‚å¦‚å‡ºç°å¹»è§‰è¯·åŠ¡å¿…å°±åŒ»ã€‚"},
        "å…¶ä»–": {ids:[19,44,59,60,64,66,89], text:"ä¸»è¦åæ˜ ç¡çœ åŠé¥®é£Ÿæƒ…å†µã€‚", adv:"å»ºç«‹è§„å¾‹çš„**ç¡çœ ä»ªå¼**ã€‚ç¡å‰1å°æ—¶è¿œç¦»ç”µå­å±å¹•ã€‚è§„å¾‹é¥®é£Ÿã€‚"}
    };

    let scores = new Array(QS.length).fill(0);
    let cur = 0;

    function renderQ() {
        document.getElementById('idx').innerText = cur + 1;
        document.getElementById('qTxt').innerText = QS[cur];
        let div = document.getElementById('opts');
        div.innerHTML = "";
        ["ä»æ— ","è½»åº¦","ä¸­åº¦","åé‡","ä¸¥é‡"].forEach((t, i) => {
            let btn = document.createElement('div');
            btn.className = 'opt';
            btn.innerHTML = `<div class="opt-n">${i+1}</div>${t}`;
            btn.onclick = () => {
                scores[cur] = i+1;
                if(++cur < QS.length) renderQ(); else calcReport();
            };
            div.appendChild(btn);
        });
        window.scrollTo(0,0);
    }

    function calcReport() {
        document.getElementById('p2').style.display = 'none';
        document.getElementById('p3').style.display = 'block';

        let total = scores.reduce((a,b)=>a+b, 0);
        let avg = (total/90).toFixed(2);
        let pos = scores.filter(s=>s>=2).length;
        let posSum = scores.filter(s=>s>=2).reduce((a,b)=>a+b,0);
        let posAvg = pos>0 ? (posSum/pos).toFixed(2) : 0;

        document.getElementById('rTotal').innerText = total;
        document.getElementById('rAvg').innerText = avg;
        document.getElementById('rPos').innerText = pos;
        document.getElementById('rPosAvg').innerText = posAvg;

        let levelText = "å¥åº·", summary = "", color = "#2ECC71";
        if(total > 160 || pos > 43) {
            levelText = "å¼‚å¸¸"; color = "#E74C3C";
            summary = "æ‚¨çš„å¿ƒç†å‹åŠ›æŒ‡æ•°åé«˜ï¼Œå»ºè®®å…³æ³¨ä¸‹æ–¹å¼‚å¸¸ç»´åº¦ï¼Œå¹¶é€‚å½“ä¼‘æ¯è°ƒèŠ‚ã€‚";
        } else {
            summary = "æ‚¨çš„å¿ƒç†çŠ¶å†µè‰¯å¥½ï¼Œå„é¡¹æŒ‡æ ‡å‡åœ¨æ­£å¸¸èŒƒå›´å†…ã€‚ç»§ç»­ä¿æŒï¼";
        }
        document.getElementById('rLevel').innerText = levelText;
        document.getElementById('rLevel').style.background = color;
        document.getElementById('rSummary').innerText = summary;

        let tbody = document.getElementById('rTable').querySelector('tbody');
        let detail = document.getElementById('detailList');
        let adviceUl = document.getElementById('adviceList');
        let labels = [], data = [], risks = [];

        for(let k in FACTORS) {
            let f = FACTORS[k];
            let sub = 0;
            f.ids.forEach(id => sub += scores[id-1]);
            let fAvg = (sub/f.ids.length).toFixed(2);
            labels.push(k);
            data.push(fAvg);

            let tagC = "#2ECC71", status = "æ­£å¸¸";
            if(fAvg >= 2) {
                tagC = fAvg>=3 ? "#E74C3C" : "#E67E22";
                status = fAvg>=3 ? "ä¸¥é‡" : "ä¸­åº¦";
                risks.push({name:k, val:fAvg, adv:f.adv});
                
                detail.innerHTML += `
                    <div class="d-card">
                        <div class="d-top"><span>${k}</span><span style="color:${tagC}">${fAvg}åˆ† (${status})</span></div>
                        <div class="d-txt"><b>è§£é‡Šï¼š</b>${f.text}</div>
                    </div>`;
            }
            tbody.innerHTML += `<tr><td>${k}</td><td>${fAvg}</td><td><span class="tag" style="background:${tagC}">${status}</span></td></tr>`;
        }

        if(detail.innerHTML === "") detail.innerHTML = "<div style='text-align:center;color:#999;padding:20px'>æ— å¼‚å¸¸ç»´åº¦</div>";

        if(risks.length === 0) {
            adviceUl.innerHTML = "<li>ğŸŒŸ çŠ¶æ€éå¸¸å¥½ï¼Œå»ºè®®ä¿æŒè§„å¾‹ä½œæ¯ã€‚</li>";
        } else {
            risks.sort((a,b)=>b.val - a.val);
            adviceUl.innerHTML = `<li><b>ğŸ©º ç»¼åˆå»ºè®®ï¼š</b> è¿‘æœŸå‹åŠ›è¾ƒå¤§ï¼Œè¯·ç»™èº«å¿ƒå‡è´Ÿã€‚</li>`;
            risks.slice(0,3).forEach(r => {
                adviceUl.innerHTML += `<li><b>é’ˆå¯¹ã€${r.name}ã€‘ï¼š</b>${r.adv}</li>`;
            });
            if(total > 200) adviceUl.innerHTML += `<li style="color:red;font-weight:bold">âš ï¸ å»ºè®®å¯»æ±‚ä¸“ä¸šå’¨è¯¢å¸ˆå¸®åŠ©ã€‚</li>`;
        }

        // ç”»å›¾ï¼ˆSVGç‰ˆï¼Œé›¶ä¾èµ–ï¼‰
        drawSVG(labels, data);
        window.scrollTo(0,0);
    }

    function drawSVG(labels, data) {
        let count = labels.length;
        let r = 100, c = 130;
        let grid = "", poly = "", txt = "";
        
        for(let j=1; j<=5; j++) {
            let pts = [];
            for(let i=0; i<count; i++) {
                let a = (Math.PI*2*i)/count - Math.PI/2;
                pts.push((c+Math.cos(a)*(r*j/5)) + "," + (c+Math.sin(a)*(r*j/5)));
            }
            grid += `<polygon points="${pts.join(' ')}" fill="none" stroke="#eee" stroke-width="1"/>`;
        }

        let dPts = [];
        for(let i=0; i<count; i++) {
            let a = (Math.PI*2*i)/count - Math.PI/2;
            let val = Math.min(data[i], 5);
            let px = c+Math.cos(a)*(r*val/5);
            let py = c+Math.sin(a)*(r*val/5);
            dPts.push(px+","+py);
            // æ–‡å­—
            let tx = c+Math.cos(a)*(r+25);
            let ty = c+Math.sin(a)*(r+25);
            txt += `<text x="${tx}" y="${ty}" font-size="10" fill="#999" text-anchor="middle" dominant-baseline="middle">${labels[i]}</text>`;
        }
        poly = `<polygon points="${dPts.join(' ')}" fill="rgba(74,144,226,0.3)" stroke="#4A90E2" stroke-width="2"/>`;
        
        document.getElementById('svgBox').innerHTML = `<svg width="260" height="260">${grid}${poly}${txt}</svg>`;
    }
</script>
</body>

</html>
